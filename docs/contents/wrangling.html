<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sungkyun Cho">
<meta name="dcterms.date" content="2024-10-12">

<title>Wrangling –  Introduction to Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../contents/eda.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../site_libs/quarto-contrib/iconify-2.0.0/iconify-icon.min.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-F9XY7W8RLK"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-F9XY7W8RLK', { 'anonymize_ip': true});
</script>


<meta property="og:title" content="Wrangling –  Introduction to Data Science">
<meta property="og:description" content="Mixed">
<meta property="og:site_name" content="Introduction to Data Science">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title"><iconify-icon inline="" icon="fa-solid:fingerprint" aria-label="Icon fingerprint from fa-solid Iconify.design set." title="Icon fingerprint from fa-solid Iconify.design set."></iconify-icon> Introduction to Data Science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-introduction" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Introduction</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-introduction">    
        <li>
    <a class="dropdown-item" href="../contents/intro.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contents/two-cultures.html">
 <span class="dropdown-text">Two Cultures</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contents/setup.html">
 <span class="dropdown-text">Python Setup</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-python-basics" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Python Basics</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-python-basics">    
        <li>
    <a class="dropdown-item" href="../contents/pandas.html">
 <span class="dropdown-text">NumPy &amp; pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contents/inspection.html">
 <span class="dropdown-text">Data Inspection</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contents/subsetting.html">
 <span class="dropdown-text">Subsetting</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-eda" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">EDA</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-eda">    
        <li>
    <a class="dropdown-item" href="../contents/vis-intro.html">
 <span class="dropdown-text">Visualize</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contents/eda.html">
 <span class="dropdown-text">Explore</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contents/wrangling.html">
 <span class="dropdown-text">Wrangling</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-linear-models" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Linear Models</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-linear-models">    
        <li>
    <a class="dropdown-item" href="../contents/model-basic.html">
 <span class="dropdown-text">Model Basics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contents/statistics.html">
 <span class="dropdown-text">Regression Analysis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ml-basics" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">ML Basics</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-ml-basics">    
        <li>
    <a class="dropdown-item" href="../contents/mlsl-intro.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contents/regularization.html">
 <span class="dropdown-text">Regularization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contents/knn.html">
 <span class="dropdown-text">K-Nearest Neighbors</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-classification" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Classification</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-classification">    
        <li>
    <a class="dropdown-item" href="../contents/logistic.html">
 <span class="dropdown-text">Logistic Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contents/lda.html">
 <span class="dropdown-text">Generative Models</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link active" href="../contents/tree.html" aria-current="page"> 
<span class="menu-text">Trees</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title">Wrangling</h1>
        </a>     
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/notice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Notice</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/two-cultures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Two Cultures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python Setup</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Python Basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/pandas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NumPy &amp; pandas</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/inspection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Inspection</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/subsetting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Subsetting</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Exploratory Data Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/vis-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualize</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Explore</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/wrangling.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Wrangling</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Linear Models</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/model-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Model Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regression Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Machine Learning Basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/mlsl-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../contents/regularization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regularization</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/shrinkage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Implementations</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/knn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">K-Nearest Neighbors</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Classification</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Logistic Regression</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/lda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Generative Models</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../contents/tree.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tree-based Models</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Communicate</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://docs.google.com/document/d/1e9R6oV1w-o0K1GNpi8ralyPGEkVzxeUNw-a4UWv61CY/edit?usp=sharing" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ask</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#nyc-taxi-and-limousine-commission-record-data" id="toc-nyc-taxi-and-limousine-commission-record-data" class="nav-link active" data-scroll-target="#nyc-taxi-and-limousine-commission-record-data">NYC Taxi and Limousine Commission Record Data</a>
  <ul>
  <li><a href="#열의-이름-수정" id="toc-열의-이름-수정" class="nav-link" data-scroll-target="#열의-이름-수정">열의 이름 수정</a></li>
  <li><a href="#값의-대체" id="toc-값의-대체" class="nav-link" data-scroll-target="#값의-대체">값의 대체</a></li>
  <li><a href="#새로운-변수-생성" id="toc-새로운-변수-생성" class="nav-link" data-scroll-target="#새로운-변수-생성">새로운 변수 생성</a></li>
  <li><a href="#필터링" id="toc-필터링" class="nav-link" data-scroll-target="#필터링">필터링</a></li>
  <li><a href="#정렬" id="toc-정렬" class="nav-link" data-scroll-target="#정렬">정렬</a></li>
  <li><a href="#grouping" id="toc-grouping" class="nav-link" data-scroll-target="#grouping">Grouping</a></li>
  <li><a href="#시간-데이터의-처리" id="toc-시간-데이터의-처리" class="nav-link" data-scroll-target="#시간-데이터의-처리">시간 데이터의 처리</a></li>
  <li><a href="#데이터-프레임들의-결합" id="toc-데이터-프레임들의-결합" class="nav-link" data-scroll-target="#데이터-프레임들의-결합">데이터 프레임들의 결합</a>
  <ul class="collapse">
  <li><a href="#merge" id="toc-merge" class="nav-link" data-scroll-target="#merge">Merge</a></li>
  <li><a href="#concatenate" id="toc-concatenate" class="nav-link" data-scroll-target="#concatenate">Concatenate</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Wrangling</h1>
<p class="subtitle lead">Mixed</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Sungkyun Cho </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 12, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div id="cell-1" class="cell" data-execution_count="26">
<details class="code-fold">
<summary>Load packages</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># numerical calculation &amp; data frames</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># visualization</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn.objects <span class="im">as</span> so</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># statistics</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># pandas options</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">'mode.copy_on_write'</span>, <span class="va">True</span>)  <span class="co"># pandas 2.0</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>pd.options.display.float_format <span class="op">=</span> <span class="st">'</span><span class="sc">{:.2f}</span><span class="st">'</span>.<span class="bu">format</span>  <span class="co"># pd.reset_option('display.float_format')</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>pd.options.display.max_rows <span class="op">=</span> <span class="dv">7</span>  <span class="co"># max number of rows to display</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># NumPy options</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>np.set_printoptions(precision <span class="op">=</span> <span class="dv">2</span>, suppress<span class="op">=</span><span class="va">True</span>)  <span class="co"># suppress scientific notation</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># For high resolution display</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib_inline</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>matplotlib_inline.backend_inline.set_matplotlib_formats(<span class="st">"retina"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="nyc-taxi-and-limousine-commission-record-data" class="level2">
<h2 class="anchored" data-anchor-id="nyc-taxi-and-limousine-commission-record-data">NYC Taxi and Limousine Commission Record Data</h2>
<div id="cell-5" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>taxi <span class="op">=</span> sns.load_dataset(<span class="st">"taxis"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>taxi</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>                  pickup             dropoff  passengers  distance  fare  tip  \
0    2019-03-23 20:21:09 2019-03-23 20:27:24           1      1.60  7.00 2.15   
1    2019-03-04 16:11:55 2019-03-04 16:19:00           1      0.79  5.00 0.00   
2    2019-03-27 17:53:01 2019-03-27 18:00:25           1      1.37  7.50 2.36   
...                  ...                 ...         ...       ...   ...  ...   
6430 2019-03-23 22:55:18 2019-03-23 23:14:25           1      4.14 16.00 0.00   
6431 2019-03-04 10:09:25 2019-03-04 10:14:29           1      1.12  6.00 0.00   
6432 2019-03-13 19:31:22 2019-03-13 19:48:02           1      3.85 15.00 3.36   

      tolls  total   color      payment            pickup_zone  \
0      0.00  12.95  yellow  credit card        Lenox Hill West   
1      0.00   9.30  yellow         cash  Upper West Side South   
2      0.00  14.16  yellow  credit card          Alphabet City   
...     ...    ...     ...          ...                    ...   
6430   0.00  17.30   green         cash    Crown Heights North   
6431   0.00   6.80   green  credit card          East New York   
6432   0.00  20.16   green  credit card            Boerum Hill   

                      dropoff_zone pickup_borough dropoff_borough  
0              UN/Turtle Bay South      Manhattan       Manhattan  
1            Upper West Side South      Manhattan       Manhattan  
2                     West Village      Manhattan       Manhattan  
...                            ...            ...             ...  
6430                Bushwick North       Brooklyn        Brooklyn  
6431  East Flatbush/Remsen Village       Brooklyn        Brooklyn  
6432               Windsor Terrace       Brooklyn        Brooklyn  

[6433 rows x 14 columns]</code></pre>
</div>
</div>
<div id="cell-6" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>taxi.describe(include<span class="op">=</span><span class="st">"object"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>         color      payment     pickup_zone           dropoff_zone  \
count     6433         6389            6407                   6388   
unique       2            2             194                    203   
top     yellow  credit card  Midtown Center  Upper East Side North   
freq      5451         4577             230                    245   

       pickup_borough dropoff_borough  
count            6407            6388  
unique              4               5  
top         Manhattan       Manhattan  
freq             5268            5206  </code></pre>
</div>
</div>
<section id="열의-이름-수정" class="level3">
<h3 class="anchored" data-anchor-id="열의-이름-수정">열의 이름 수정</h3>
<p><code>rename()</code></p>
<div id="cell-8" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>taxi.rename(columns<span class="op">=</span>{<span class="st">"passengers"</span>: <span class="st">"persons"</span>, <span class="st">"payment"</span>: <span class="st">"pay"</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-9" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>taxi.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>               pickup             dropoff  persons  distance  fare  tip  \
0 2019-03-23 20:21:09 2019-03-23 20:27:24        1      1.60  7.00 2.15   
1 2019-03-04 16:11:55 2019-03-04 16:19:00        1      0.79  5.00 0.00   
2 2019-03-27 17:53:01 2019-03-27 18:00:25        1      1.37  7.50 2.36   

   tolls  total   color          pay            pickup_zone  \
0   0.00  12.95  yellow  credit card        Lenox Hill West   
1   0.00   9.30  yellow         cash  Upper West Side South   
2   0.00  14.16  yellow  credit card          Alphabet City   

            dropoff_zone pickup_borough dropoff_borough  
0    UN/Turtle Bay South      Manhattan       Manhattan  
1  Upper West Side South      Manhattan       Manhattan  
2           West Village      Manhattan       Manhattan  </code></pre>
</div>
</div>
</section>
<section id="값의-대체" class="level3">
<h3 class="anchored" data-anchor-id="값의-대체">값의 대체</h3>
<div id="cell-11" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>idx_cash <span class="op">=</span> (taxi[<span class="st">"pay"</span>] <span class="op">==</span> <span class="st">"cash"</span>)  <span class="co"># Boolean index</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 직접 값을 대입</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>taxi.loc[idx_cash, <span class="st">"tip"</span>] <span class="op">=</span> np.nan  <span class="co"># missing(NA) values</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>np.where()</code>의 활용<br>
<em>(boolean condition, value if True, value if False)</em></p>
<div id="cell-13" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>taxi[<span class="st">"tip"</span>] <span class="op">=</span> np.where(idx_cash, np.nan, taxi[<span class="st">"tip"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>map()</code>의 활용<br>
dictionary로 입력</p>
<div id="cell-15" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>taxi[<span class="st">"pay"</span>] <span class="op">=</span> taxi[<span class="st">"pay"</span>].<span class="bu">map</span>({<span class="st">"credit card"</span>: <span class="st">"Card"</span>, <span class="st">"cash"</span>: <span class="st">"Cash"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-16" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>taxi.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>               pickup             dropoff  persons  distance  fare  tip  \
0 2019-03-23 20:21:09 2019-03-23 20:27:24        1      1.60  7.00 2.15   
1 2019-03-04 16:11:55 2019-03-04 16:19:00        1      0.79  5.00  NaN   
2 2019-03-27 17:53:01 2019-03-27 18:00:25        1      1.37  7.50 2.36   

   tolls  total   color   pay            pickup_zone           dropoff_zone  \
0   0.00  12.95  yellow  Card        Lenox Hill West    UN/Turtle Bay South   
1   0.00   9.30  yellow  Cash  Upper West Side South  Upper West Side South   
2   0.00  14.16  yellow  Card          Alphabet City           West Village   

  pickup_borough dropoff_borough  
0      Manhattan       Manhattan  
1      Manhattan       Manhattan  
2      Manhattan       Manhattan  </code></pre>
</div>
</div>
</section>
<section id="새로운-변수-생성" class="level3">
<h3 class="anchored" data-anchor-id="새로운-변수-생성">새로운 변수 생성</h3>
<p>기본적인 Series들의 연산</p>
<div id="cell-19" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>taxi[<span class="st">"total2"</span>] <span class="op">=</span> taxi[<span class="st">"total"</span>] <span class="op">-</span> taxi[<span class="st">"tip"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>assign()</code>의 활용</p>
<div id="cell-21" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>taxi <span class="op">=</span> taxi.assign(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    tip_ratio <span class="op">=</span> <span class="kw">lambda</span> x: x[<span class="st">"tip"</span>] <span class="op">/</span> x[<span class="st">"total2"</span>],</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    tip_ratio_per <span class="op">=</span> <span class="kw">lambda</span> x: x.tip_ratio <span class="op">/</span> x.persons  <span class="co"># dot notation</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-22" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>taxi.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>               pickup             dropoff  persons  distance  fare  tip  \
0 2019-03-23 20:21:09 2019-03-23 20:27:24        1      1.60  7.00 2.15   
1 2019-03-04 16:11:55 2019-03-04 16:19:00        1      0.79  5.00  NaN   
2 2019-03-27 17:53:01 2019-03-27 18:00:25        1      1.37  7.50 2.36   

   tolls  total   color   pay            pickup_zone           dropoff_zone  \
0   0.00  12.95  yellow  Card        Lenox Hill West    UN/Turtle Bay South   
1   0.00   9.30  yellow  Cash  Upper West Side South  Upper West Side South   
2   0.00  14.16  yellow  Card          Alphabet City           West Village   

  pickup_borough dropoff_borough  total2  tip_ratio  tip_ratio_per  
0      Manhattan       Manhattan   10.80       0.20           0.20  
1      Manhattan       Manhattan     NaN        NaN            NaN  
2      Manhattan       Manhattan   11.80       0.20           0.20  </code></pre>
</div>
</div>
<div id="cell-23" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># total2의 NA값 원래대로 복구</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>taxi[<span class="st">"total2"</span>] <span class="op">=</span> np.where(idx_cash, taxi[<span class="st">"total"</span>], taxi[<span class="st">"total2"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>잠시, 택시요금과 팁 간의 관계를 살펴보면,</p>
<div id="cell-25" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>taxi.plot.scatter(x<span class="op">=</span><span class="st">"total2"</span>, y<span class="op">=</span><span class="st">"tip"</span>, alpha<span class="op">=</span><span class="fl">.2</span>, figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">3</span>))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="wrangling_files/figure-html/cell-17-output-1.png" width="454" height="294" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-26" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>taxi.plot.scatter(x<span class="op">=</span><span class="st">"total2"</span>, y<span class="op">=</span><span class="st">"tip_ratio"</span>, alpha<span class="op">=</span><span class="fl">.2</span>, figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">3</span>))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="wrangling_files/figure-html/cell-18-output-1.png" width="459" height="294" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-27" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    so.Plot(taxi, x<span class="op">=</span><span class="st">'total2'</span>, y<span class="op">=</span><span class="st">'tip_ratio'</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    .add(so.Dot(alpha<span class="op">=</span><span class="fl">.5</span>, pointsize<span class="op">=</span><span class="dv">2</span>))</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    .add(so.Line(color<span class="op">=</span><span class="st">".2"</span>), so.PolyFit(<span class="dv">5</span>))</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    .facet(<span class="st">"persons"</span>, wrap<span class="op">=</span><span class="dv">4</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    .layout(size<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>))</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    .label(title<span class="op">=</span><span class="st">"</span><span class="sc">{}</span><span class="st"> passengers"</span>.<span class="bu">format</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<div>
<figure class="figure">
<p><img src="wrangling_files/figure-html/cell-19-output-1.png" width="753" height="465" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="필터링" class="level3">
<h3 class="anchored" data-anchor-id="필터링">필터링</h3>
<p><code>query()</code>의 활용</p>
<blockquote class="blockquote">
<p>Conditional operators<br>
<code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>,<br>
<code>==</code> (equal to), <code>!=</code> (not equal to)<br>
<code>and</code>, <code>&amp;</code> (and)<br>
<code>or</code>, <code>|</code> (or)<br>
<code>not</code>, <code>~</code> (not)<br>
<code>in</code> (includes), <code>not in</code> (not included)</p>
</blockquote>
<div id="cell-29" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    taxi.query(<span class="st">'color == "green" &amp; pickup_borough == "Manhattan"'</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    .head(<span class="dv">3</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>                  pickup             dropoff  persons  distance  fare  tip  \
5453 2019-03-29 18:12:27 2019-03-29 18:20:40        1      1.51  7.50 1.20   
5454 2019-03-06 11:11:33 2019-03-06 11:15:15        1      0.45  4.50  NaN   
5465 2019-03-27 20:55:35 2019-03-27 21:01:55        1      1.43  7.00 3.00   

      tolls  total  color   pay        pickup_zone           dropoff_zone  \
5453   0.00  10.50  green  Card  East Harlem North      East Harlem South   
5454   0.00   5.30  green  Cash  East Harlem North      East Harlem South   
5465   0.00  11.30  green  Card     Central Harlem  Upper West Side North   

     pickup_borough dropoff_borough  total2  tip_ratio  tip_ratio_per  
5453      Manhattan       Manhattan    9.30       0.13           0.13  
5454      Manhattan       Manhattan    5.30        NaN            NaN  
5465      Manhattan       Manhattan    8.30       0.36           0.36  </code></pre>
</div>
</div>
</section>
<section id="정렬" class="level3">
<h3 class="anchored" data-anchor-id="정렬">정렬</h3>
<div id="cell-31" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    taxi.query(<span class="st">'persons &gt; 1'</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">"tip_ratio"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>                  pickup             dropoff  persons  distance  fare  tip  \
2923 2019-03-06 23:17:06 2019-03-06 23:24:12        2      1.60  7.50 7.00   
3272 2019-03-28 11:15:04 2019-03-28 11:21:01        3      0.62  5.50 5.00   
4912 2019-03-27 18:04:45 2019-03-27 18:11:07        2      0.55  5.50 5.00   
...                  ...                 ...      ...       ...   ...  ...   
6405 2019-03-21 18:28:55 2019-03-21 18:51:08        2      3.88 16.50  NaN   
6412 2019-03-20 17:33:25 2019-03-20 17:42:48        5      1.40  8.00  NaN   
6420 2019-03-16 15:39:23 2019-03-16 15:46:18        2      1.20  7.00  NaN   

      tolls  total   color   pay                   pickup_zone  \
2923   0.00  18.30  yellow  Card  Penn Station/Madison Sq West   
3272   0.00  13.80  yellow  Card      Financial District North   
4912   0.00  14.80  yellow  Card                   Murray Hill   
...     ...    ...     ...   ...                           ...   
6405   0.00  18.30   green  Cash                   Boerum Hill   
6412   0.00   9.80   green  Cash              Brooklyn Heights   
6420   0.00   7.80   green  Cash                Central Harlem   

               dropoff_zone pickup_borough dropoff_borough  total2  tip_ratio  \
2923              Hudson Sq      Manhattan       Manhattan   11.30       0.62   
3272           Battery Park      Manhattan       Manhattan    8.80       0.57   
4912    UN/Turtle Bay South      Manhattan       Manhattan    9.80       0.51   
...                     ...            ...             ...     ...        ...   
6405             Ocean Hill       Brooklyn        Brooklyn   18.30        NaN   
6412            Fort Greene       Brooklyn        Brooklyn    9.80        NaN   
6420  Upper West Side North      Manhattan       Manhattan    7.80        NaN   

      tip_ratio_per  
2923           0.31  
3272           0.19  
4912           0.26  
...             ...  
6405            NaN  
6412            NaN  
6420            NaN  

[1659 rows x 17 columns]</code></pre>
</div>
</div>
</section>
<section id="grouping" class="level3">
<h3 class="anchored" data-anchor-id="grouping">Grouping</h3>
<ul>
<li><code>groupby()</code>로 데이터를 의미있는 그룹으로 나눈 후, 다음과 같은 통계치를 계산</li>
<li><code>size()</code>, <code>count()</code>, <code>sum()</code>, <code>mean()</code>, <code>min()</code>, <code>max()</code></li>
</ul>
<p>  <img src="images/group_agg.png" class="img-fluid" width="300"></p>
<div style="line-height: 1.5em; font-size: .9em">
<p>Source: <em>Ch.10 in Python for Data Analysis (3e)</em> by Wes McKinney</p>
</div>
<div id="cell-35" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>taxi.groupby(<span class="st">"color"</span>).size()  <span class="co"># size(): 열의 개수</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>color
green      982
yellow    5451
dtype: int64</code></pre>
</div>
</div>
<div id="cell-36" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>taxi.groupby([<span class="st">"color"</span>, <span class="st">"pay"</span>]).size()  <span class="co"># size(): 열의 개수</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>color   pay 
green   Card     577
        Cash     400
yellow  Card    4000
        Cash    1412
dtype: int64</code></pre>
</div>
</div>
<div id="cell-37" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>taxi.groupby([<span class="st">"color"</span>, <span class="st">"pay"</span>])[<span class="st">"total2"</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<pre><code>color   pay 
green   Card   18.76
        Cash   11.40
yellow  Card   17.08
        Cash   15.61
Name: total2, dtype: float64</code></pre>
</div>
</div>
<div id="cell-38" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    taxi.groupby([<span class="st">"color"</span>, <span class="st">"pay"</span>])[<span class="st">"total2"</span>].mean()</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    .unstack()  <span class="co"># wide format으로 변환</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<pre><code>pay     Card  Cash
color             
green  18.76 11.40
yellow 17.08 15.61</code></pre>
</div>
</div>
<div id="cell-39" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"total"</span>] <span class="op">=</span> df.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>pay     Card  Cash  total
color                    
green  18.76 11.40  30.15
yellow 17.08 15.61  32.68</code></pre>
</div>
</div>
<div id="cell-40" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df.assign(</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    Card_pct <span class="op">=</span> <span class="kw">lambda</span> x: x.Card <span class="op">/</span> x.total <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    Cash_pct <span class="op">=</span> <span class="kw">lambda</span> x: x.Cash <span class="op">/</span> x.total <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>pay     Card  Cash  total  Card_pct  Cash_pct
color                                        
green  18.76 11.40  30.15     62.21     37.79
yellow 17.08 15.61  32.68     52.25     47.75</code></pre>
</div>
</div>
<p>여러 함수를 동시에 적용: <code>agg()</code></p>
<div id="cell-42" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>taxi.groupby([<span class="st">"color"</span>, <span class="st">"pay"</span>])[<span class="st">"total2"</span>].agg([<span class="st">"mean"</span>, <span class="st">"std"</span>, <span class="st">"size"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>             mean   std  size
color  pay                   
green  Card 18.76 14.73   577
       Cash 11.40 10.41   400
yellow Card 17.08 12.00  4000
       Cash 15.61 12.38  1412</code></pre>
</div>
</div>
<p>가장 일반적인 방식으로 <code>appy()</code>를 사용하여 사용자 정의 함수를 적용</p>
<div id="cell-44" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># standardize</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> standardize(x):</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (x <span class="op">-</span> x.mean()) <span class="op">/</span> x.std()</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>taxi.groupby(<span class="st">"color"</span>, group_keys<span class="op">=</span><span class="va">True</span>)[<span class="st">"tip_ratio"</span>].<span class="bu">apply</span>(standardize)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<pre><code>color       
green   5451     NaN
        5452   -0.95
        5453    0.23
                ... 
yellow  5448    0.33
        5449    0.33
        5450   -1.12
Name: tip_ratio, Length: 6433, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="시간-데이터의-처리" class="level3">
<h3 class="anchored" data-anchor-id="시간-데이터의-처리">시간 데이터의 처리</h3>
<p>시간을 표시하는 datetime64 타입을 이용해 시간 데이터를 처리하며,<br>
<code>dt</code> accessor를 사용</p>
<div id="cell-46" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pickup 시간으로부터 요일을 추출</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>taxi[<span class="st">"day"</span>] <span class="op">=</span> taxi[<span class="st">"pickup"</span>].dt.day_name().<span class="bu">str</span>[:<span class="dv">3</span>]  <span class="co"># 요일의 앞 3글자</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-47" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pickup 시간으로부터 시간대를 추출</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>taxi[<span class="st">"hour"</span>] <span class="op">=</span> taxi[<span class="st">"pickup"</span>].dt.hour</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-48" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 택시를 탄 시간(분)을 계산</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>taxi[<span class="st">"duration"</span>] <span class="op">=</span> (taxi[<span class="st">"dropoff"</span>] <span class="op">-</span> taxi[<span class="st">"pickup"</span>]).dt.total_seconds() <span class="op">/</span> <span class="dv">60</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-49" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>taxi.head(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>               pickup             dropoff  persons  distance  fare  tip  \
0 2019-03-23 20:21:09 2019-03-23 20:27:24        1      1.60  7.00 2.15   
1 2019-03-04 16:11:55 2019-03-04 16:19:00        1      0.79  5.00  NaN   
2 2019-03-27 17:53:01 2019-03-27 18:00:25        1      1.37  7.50 2.36   

   tolls  total   color   pay            pickup_zone           dropoff_zone  \
0   0.00  12.95  yellow  Card        Lenox Hill West    UN/Turtle Bay South   
1   0.00   9.30  yellow  Cash  Upper West Side South  Upper West Side South   
2   0.00  14.16  yellow  Card          Alphabet City           West Village   

  pickup_borough dropoff_borough  total2  tip_ratio  tip_ratio_per  day  hour  \
0      Manhattan       Manhattan   10.80       0.20           0.20  Sat    20   
1      Manhattan       Manhattan    9.30        NaN            NaN  Mon    16   
2      Manhattan       Manhattan   11.80       0.20           0.20  Wed    17   

   duration  
0      6.25  
1      7.08  
2      7.40  </code></pre>
</div>
</div>
<p><strong>요일과 시간대별로 팁의 비율은 다른가?</strong></p>
<div id="cell-51" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>taxi.groupby([<span class="st">"day"</span>, <span class="st">"hour"</span>])[<span class="st">"tip_ratio"</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<pre><code>day  hour
Fri  0      0.17
     1      0.19
     2      0.12
            ... 
Wed  21     0.18
     22     0.19
     23     0.23
Name: tip_ratio, Length: 167, dtype: float64</code></pre>
</div>
</div>
<p><code>pivot_table()</code>를 활용할 수도 있음</p>
<div id="cell-53" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>taxi.pivot_table(<span class="st">"tip_ratio"</span>, <span class="st">"hour"</span>, <span class="st">"day"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<pre><code>day   Fri  Mon  Sat  Sun  Thu  Tue  Wed
hour                                   
0    0.17 0.19 0.17 0.18 0.17 0.22 0.19
1    0.19  NaN 0.18 0.18 0.20 0.20 0.18
2    0.12 0.18 0.18 0.19 0.22 0.20 0.17
...   ...  ...  ...  ...  ...  ...  ...
21   0.17 0.18 0.15 0.18 0.18 0.17 0.18
22   0.17 0.17 0.18 0.18 0.16 0.18 0.19
23   0.18 0.22 0.17 0.19 0.19 0.18 0.23

[24 rows x 7 columns]</code></pre>
</div>
</div>
<div id="cell-54" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># day를 categorical 타입으로 변환</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>taxi[<span class="st">"day"</span>] <span class="op">=</span> pd.Categorical(taxi[<span class="st">"day"</span>], categories<span class="op">=</span>[<span class="st">"Mon"</span>, <span class="st">"Tue"</span>, <span class="st">"Wed"</span>, <span class="st">"Thu"</span>, <span class="st">"Fri"</span>, <span class="st">"Sat"</span>, <span class="st">"Sun"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-55" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> taxi.pivot_table(<span class="st">"tip_ratio"</span>, <span class="st">"hour"</span>, <span class="st">"day"</span>)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">6</span>, <span class="dv">4</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>), sharex<span class="op">=</span><span class="va">True</span>, sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>fig.subplots_adjust(wspace<span class="op">=</span><span class="fl">0.1</span>, hspace<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, ax <span class="kw">in</span> <span class="bu">enumerate</span>(axes.flat):</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    df.iloc[i].plot.bar(ax<span class="op">=</span>ax, ylim<span class="op">=</span>(<span class="fl">0.1</span>, <span class="fl">0.23</span>))</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    ax.set_title(<span class="ss">f"hour=</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">"</span>, fontsize<span class="op">=</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="wrangling_files/figure-html/cell-37-output-1.png" width="671" height="713" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-56" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>taxi_day_hour <span class="op">=</span> (</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    taxi.groupby([<span class="st">"day"</span>, <span class="st">"hour"</span>])[<span class="st">"tip_ratio"</span>]</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    .agg([<span class="st">"mean"</span>, <span class="st">"size"</span>])</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="st">"mean"</span>: <span class="st">"tip_ratio"</span>, <span class="st">"size"</span>: <span class="st">"n"</span>})</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>taxi_day_hour</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<pre><code>     day  hour  tip_ratio   n
0    Mon     0       0.19  13
1    Mon     1        NaN   2
2    Mon     2       0.18   6
..   ...   ...        ...  ..
165  Sun    21       0.18  42
166  Sun    22       0.18  32
167  Sun    23       0.19  23

[168 rows x 4 columns]</code></pre>
</div>
</div>
<div id="cell-57" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    so.Plot(taxi_day_hour, y<span class="op">=</span><span class="st">'day'</span>, x<span class="op">=</span><span class="st">'tip_ratio'</span>, color<span class="op">=</span><span class="st">'n'</span>)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    .add(so.Bar(width<span class="op">=</span><span class="fl">.5</span>))</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    .facet(<span class="st">"hour"</span>, wrap<span class="op">=</span><span class="dv">6</span>)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    .layout(size<span class="op">=</span>(<span class="dv">8</span>, <span class="fl">5.5</span>))</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    .limit(x<span class="op">=</span>(<span class="fl">0.12</span>, <span class="fl">0.23</span>))</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    .theme({<span class="st">'ytick.labelsize'</span>: <span class="dv">9</span>})</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<div>
<figure class="figure">
<p><img src="wrangling_files/figure-html/cell-39-output-1.png" width="831" height="513" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="데이터-프레임들의-결합" class="level3">
<h3 class="anchored" data-anchor-id="데이터-프레임들의-결합">데이터 프레임들의 결합</h3>
<section id="merge" class="level4">
<h4 class="anchored" data-anchor-id="merge">Merge</h4>
<ul>
<li><code>merge()</code>를 사용하여 두 데이터 프레임을 join</li>
<li>Key에 해당하는 변수들의 값이 매치되는 행들을 찾아 결합</li>
<li>결합 방식: “inner”, “left”, “right”, “outer”</li>
</ul>
<p><img src="images/join_dup1.png" class="img-fluid" width="350"></p>
<p>Inner join의 예:<br>
<img src="images/join_inner.png" class="img-fluid" width="400"></p>
<p><a href="https://www.dropbox.com/scl/fi/hk1ixxomc42ha8s2n4plr/nyc_neighborhood.csv?rlkey=wm4dd2o3xm49rb9tv59d0kakv&amp;dl=1">nyc_neighborhood.csv dataset</a></p>
<div id="cell-61" class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>nyc <span class="op">=</span> pd.read_csv(<span class="st">"data/nyc_neighborhood.csv"</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>nyc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="65">
<pre><code>         borough  units  labor  carfree  density      pop
0      Manhattan   5083   0.68     0.88    71.90  1628706
1          Bronx   6120   0.59     0.71    33.70  1418207
2       Brooklyn  10129   0.64     0.75    36.90  2559903
3         Queens   6752   0.64     0.59    20.70  2253858
4  Staten Island    582   0.62     0.34     8.30   476143</code></pre>
</div>
</div>
<div id="cell-62" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    taxi.merge(</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>        nyc, left_on<span class="op">=</span><span class="st">"pickup_borough"</span>, right_on<span class="op">=</span><span class="st">"borough"</span>, how<span class="op">=</span><span class="st">"left"</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    ).head(<span class="dv">3</span>)</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>               pickup             dropoff  persons  distance  fare  tip  \
0 2019-03-23 20:21:09 2019-03-23 20:27:24        1      1.60  7.00 2.15   
1 2019-03-04 16:11:55 2019-03-04 16:19:00        1      0.79  5.00  NaN   
2 2019-03-27 17:53:01 2019-03-27 18:00:25        1      1.37  7.50 2.36   

   tolls  total   color   pay  ... tip_ratio_per  day hour duration  \
0   0.00  12.95  yellow  Card  ...          0.20  Sat   20     6.25   
1   0.00   9.30  yellow  Cash  ...           NaN  Mon   16     7.08   
2   0.00  14.16  yellow  Card  ...          0.20  Wed   17     7.40   

     borough   units  labor carfree  density        pop  
0  Manhattan 5083.00   0.68    0.88    71.90 1628706.00  
1  Manhattan 5083.00   0.68    0.88    71.90 1628706.00  
2  Manhattan 5083.00   0.68    0.88    71.90 1628706.00  

[3 rows x 26 columns]</code></pre>
</div>
</div>
<p>Merge를 데이터 필터링에 사용할 수도 있음</p>
<div id="cell-64" class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>taxi_day_hour</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="67">
<pre><code>     day  hour  tip_ratio   n
0    Mon     0       0.19  13
1    Mon     1        NaN   2
2    Mon     2       0.18   6
..   ...   ...        ...  ..
165  Sun    21       0.18  42
166  Sun    22       0.18  32
167  Sun    23       0.19  23

[168 rows x 4 columns]</code></pre>
</div>
</div>
<div id="cell-65" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>days_top_ratio <span class="op">=</span> (</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>    taxi_day_hour</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">'n &gt; 10'</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    .nlargest(<span class="dv">3</span>, <span class="st">"tip_ratio"</span>)</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>days_top_ratio</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<pre><code>    day  hour  tip_ratio   n
71  Wed    23       0.23  39
23  Mon    23       0.22  22
24  Tue     0       0.22  13</code></pre>
</div>
</div>
<p>팁의 비율이 가장 높았던 3개의 (요일, 시간대) 조합에 해당하는 <code>taxi</code> 데이터셋을 추리려면</p>
<div id="cell-67" class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>taxi.merge(days_top_ratio, on<span class="op">=</span>[<span class="st">"day"</span>, <span class="st">"hour"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>                pickup             dropoff  persons  distance  fare  tip  \
0  2019-03-25 23:05:54 2019-03-25 23:11:13        1      0.80  5.50 2.30   
1  2019-03-27 23:10:02 2019-03-27 23:22:11        3      2.77 11.00 3.70   
2  2019-03-20 23:19:55 2019-03-20 23:46:00        1      4.82 19.50 4.66   
..                 ...                 ...      ...       ...   ...  ...   
71 2019-03-18 23:48:38 2019-03-18 23:56:36        1      2.00  8.50  NaN   
72 2019-03-06 23:32:50 2019-03-06 23:34:31        1      0.30  3.50 2.50   
73 2019-03-26 00:06:16 2019-03-26 00:12:46        1      0.86  6.00  NaN   

    tolls  total   color   pay  ... pickup_borough dropoff_borough total2  \
0    0.00  11.60  yellow  Card  ...      Manhattan       Manhattan   9.30   
1    0.00  18.50  yellow  Card  ...      Manhattan       Manhattan  14.80   
2    0.00  27.96  yellow  Card  ...      Manhattan       Manhattan  23.30   
..    ...    ...     ...   ...  ...            ...             ...    ...   
71   0.00   9.80   green  Cash  ...         Queens          Queens   9.80   
72   0.00   7.30   green  Card  ...         Queens          Queens   4.80   
73   0.00   7.30   green  Cash  ...      Manhattan       Manhattan   7.30   

   tip_ratio_x  tip_ratio_per  day  hour duration  tip_ratio_y   n  
0         0.25           0.25  Mon    23     5.32         0.22  22  
1         0.25           0.08  Wed    23    12.15         0.23  39  
2         0.20           0.20  Wed    23    26.08         0.23  39  
..         ...            ...  ...   ...      ...          ...  ..  
71         NaN            NaN  Mon    23     7.97         0.22  22  
72        0.52           0.52  Wed    23     1.68         0.23  39  
73         NaN            NaN  Tue     0     6.50         0.22  13  

[74 rows x 22 columns]</code></pre>
</div>
</div>
</section>
<section id="concatenate" class="level4">
<h4 class="anchored" data-anchor-id="concatenate">Concatenate</h4>
<p><code>pd.concat([df1, df2, ...], axis=)</code><br>
행과 열의 index를 매치시켜 두 DataFrame/Series를 합침</p>
<div id="cell-70" class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.DataFrame(</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>    np.arange(<span class="dv">6</span>).reshape(<span class="dv">3</span>, <span class="dv">2</span>), index<span class="op">=</span>[<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>], columns<span class="op">=</span>[<span class="st">"one"</span>, <span class="st">"two"</span>]</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.DataFrame(</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">5</span> <span class="op">+</span> np.arange(<span class="dv">4</span>).reshape(<span class="dv">2</span>, <span class="dv">2</span>), index<span class="op">=</span>[<span class="st">"a"</span>, <span class="st">"c"</span>], columns<span class="op">=</span>[<span class="st">"three"</span>, <span class="st">"four"</span>]</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div>

</div>
<div id="cell-71" class="cell quarto-layout-panel" data-layout-ncol="4" data-execution_count="71">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<pre><code>   one  two
a    0    1
b    2    3
c    4    5</code></pre>
</div>
<div class="quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<pre><code>   three  four
a      5     6
c      7     8</code></pre>
</div>
</div>
</div>
<div id="cell-72" class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>pd.concat([df1, df2], axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="72">
<pre><code>   one  two  three  four
a    0    1   5.00  6.00
b    2    3    NaN   NaN
c    4    5   7.00  8.00</code></pre>
</div>
</div>
<div id="cell-73" class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>pd.concat([df1, df2])  <span class="co"># default: axis=0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="73">
<pre><code>   one  two  three  four
a 0.00 1.00    NaN   NaN
b 2.00 3.00    NaN   NaN
c 4.00 5.00    NaN   NaN
a  NaN  NaN   5.00  6.00
c  NaN  NaN   7.00  8.00</code></pre>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/dgds101\.modellings\.art");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../contents/eda.html" class="pagination-link" aria-label="Explore">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Explore</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>This work © 2024 by Sungkyun Cho is licensed under CC BY-NC-SA 4.0</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>